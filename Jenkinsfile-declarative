@Library('shared-starter') _
pipeline {
	agent any
	stages {
		stage("Prepare Build Environment") {
			steps {
				echo 'load'
				prepareBuildEnvironment()
				helloWorld()
				helloWorldExternal()
			}
		}
		stage("Source Code Checkout") {
			steps {
				echo 'scc'
			}
		}
		stage("SonarQube Scan") {
			when {
				branch 'Development'
			}
			steps {
				echo 'scan'
			}
		}
		stage("Build Application") {
			steps {
				echo 'build'
			}
		}
		stage("Publish Artifacts") {
			steps {
				publishArtifacts(name: 'publishArtifacts')
			}
		}
		stage("Deploy Application") {
			steps {
				deployApplication(name: 'publishArtifacts')
			}
		}
	}
	post {
		always {
			sendNotification()
		}
	}
}
